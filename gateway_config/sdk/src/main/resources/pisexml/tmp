<!-- visible input parameters -->	

    <parameter type="Integer" issimple="1" ismandatory="1">
	    <name>particle_diameter</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Diameter of particle (Angstroms)</prompt>
		    <format>
			    <language>perl</language>
			    <code>"—-particle_diameter $value"</code>
		    </format>
		    <ctrls>
			    <ctrl>
                    <message>Please enter an integer > 0 for the particle diameter (in Angstroms)</message>
				    <language>perl</language>
				    <code>$particle_diameter &lt; 1</code>
			    </ctrl>
		    </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Float" issimple="1" ismandatory="1">
	    <name>pixel_size</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Pixel size of data (Angstroms/pix)</prompt>
		    <format>
			    <language>perl</language>
			    <code>"—angpix $value"</code>
		    </format>
            <ctrls>
                <ctrl>
                    <message>Please enter a float > 0.00 for the pixel size (in Angstroms/pix)</message>
                    <language>perl</language>
                    <code>$pixel_size &lt; 0.01</code>
                </ctrl>
            </ctrls>
	    </attributes>
    </parameter>

    <parameter type="InFile" issimple="1" ismandatory="1">
	    <name>reference_map</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Reference map</prompt>
		    <format>
			    <language>perl</language>
			    <code>"—angpix $value"</code>
		    </format>
		    <filenames>reference_map</filenames>
            <ctrls>
                <ctrl>
                    <message>Please choose a reference map file</message>
                    <language>perl</language>
                    <code>!$reference_map</code>
                </ctrl>
            </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Excl" issimple="1" ismandatory="1">
	    <name>symmetry</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Symmetry of sample</prompt>
		    <format>
			    <language>perl</language>
			    <code>"—angpix $value"</code>
		    </format>
            <vdef>
                <value>C1</value>
            </vdef>
            <vlist>
                <value>C1</value>
                <label>C1</label>
                <value>Ci</value>
                <label>Ci</label>
                <value>Cs</value>
                <label>Cs</label>
                <value>C2</value>
                <label>C2</label>
                <value>C2v</value>
                <label>C2v</label>
                <value>C2h</value>
                <label>C2h</label>
                <value>C3</value>
                <label>C3</label>
                <value>C3v</value>
                <label>C3v</label>
                <value>C3h</value>
                <label>C3h</label>
                <value>C4</value>
                <label>C4</label>
                <value>C4v</value>
                <label>C4v</label>
                <value>C4h</value>
                <label>C4h</label>
                <value>C5</value>
                <label>C5</label>
                <value>C5v</value>
                <label>C5v</label>
                <value>C5h</value>
                <label>C5h</label>
                <value>C6</value>
                <label>C6</label>
                <value>C6v</value>
                <label>C6v</label>
                <value>C6h</value>
                <label>C6h</label>
                <value>C7</value>
                <label>C7</label>
                <value>C7v</value>
                <label>C7v</label>
                <value>C7h</value>
                <label>C7h</label>
                <value>C8</value>
                <label>C8</label>
                <value>C8v</value>
                <label>C8v</label>
                <value>C8h</value>
                <label>C8h</label>
                <value>C9</value>
                <label>C9</label>
                <value>C9v</value>
                <label>C9v</label>
                <value>C9h</value>
                <label>C9h</label>
                <value>C10</value>
                <label>C10</label>
                <value>C10v</value>
                <label>C10v</label>
                <value>C10h</value>
                <label>C10h</label>
                <value>S1</value>
                <label>S1</label>
                <value>S2</value>
                <label>S2</label>
                <value>S3</value>
                <label>S3</label>
                <value>S4</value>
                <label>S4</label>
                <value>S5</value>
                <label>S5</label>
                <value>S6</value>
                <label>S6</label>
                <value>S7</value>
                <label>S7</label>
                <value>S8</value>
                <label>S8</label>
                <value>S9</value>
                <label>S9</label>
                <value>S10</value>
                <label>S10</label>
                <value>D1</value>
                <label>D1</label>
                <value>D2</value>
                <label>D2</label>
                <value>D3</value>
                <label>D3</label>
                <value>D4</value>
                <label>D4</label>
                <value>D5</value>
                <label>D5</label>
                <value>D6</value>
                <label>D6</label>
                <value>D7</value>
                <label>D7</label>
                <value>D8</value>
                <label>D8</label>
                <value>D9</value>
                <label>D9</label>
                <value>D10</value>
                <label>D10</label>
                <value>D11</value>
                <label>D11</label>
                <value>D12</value>
                <label>D12</label>
                <value>D1v</value>
                <value>D1v</value>
                <label>D2v</label>
                <label>D2v</label>
                <value>D3v</value>
                <label>D3v</label>
                <value>D4v</value>
                <label>D4v</label>
                <value>D5v</value>
                <label>D5v</label>
                <value>D6v</value>
                <label>D6v</label>
                <value>D7v</value>
                <label>D7v</label>
                <value>D8v</value>
                <label>D8v</label>
                <value>D9v</value>
                <label>D9v</label>
                <value>D10v</value>
                <label>D10v</label>
                <value>D11v</value>
                <label>D11v</label>
                <value>D12v</value>
                <label>D12v</label>
                <value>D1h</value>
                <label>D1h</label>
                <value>D2h</value>
                <label>D2h</label>
                <value>D3h</value>
                <label>D3h</label>
                <value>D4h</value>
                <label>D4h</label>
                <value>D5h</value>
                <label>D5h</label>
                <value>D6h</value>
                <label>D6h</label>
                <value>D7h</value>
                <label>D7h</label>
                <value>D8h</value>
                <label>D8h</label>
                <value>D9h</value>
                <label>D9h</label>
                <value>D10h</value>
                <label>D10h</label>
                <value>D11h</value>
                <label>D11h</label>
                <value>D12h</value>
                <label>D12h</label>
                <value>T</value>
                <label>T</label>
                <value>Td</value>
                <label>Td</label>
                <value>Th</value>
                <label>Th</label>
                <value>O</value>
                <label>O</label>
                <value>Oh</value>
                <label>Oh</label>
                <value>I1</value>
                <label>I1</label>
                <value>I2</value>
                <label>I2</label>
                <value>I3</value>
                <label>I3</label>
                <value>I4</value>
                <label>I4</label>
                <value>I5</value>
                <label>I5</label>
                <value>Ih</value>
                <label>Ih</label>
            </vlist>
	    </attributes>
    </parameter>

    <parameter type="Excl" issimple="1" ismandatory="1">
	    <name>greyscale</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Reference map is on absolute greyscale</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vlist>
                <value>yes</value>
                <label>Yes</label>
                <value>no</value>
                <label>No</label>
            </vlist>
            <vdef>
                <value>no</value>
            </vdef>
	    </attributes>
    </parameter>

    <parameter type="Integer" issimple="1" ismandatory="1">
	    <name>low_pass</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Initial low-pass filter (Angstrom)</prompt>
            <vdef>
                <value>60</value>
            </vdef>
		    <format>
			    <language>perl</language>
			    <code>"—-ini_high $value"</code>
		    </format>
		    <ctrls>
			    <ctrl>
                    <message>Please enter an integer > 0 for the initial low-pass filter (in Angstroms)</message>
				    <language>perl</language>
				    <code>$low_pass &lt; 1</code>
			    </ctrl>
		    </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Integer" issimple="1" ismandatory="1">
	    <name>classes</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Number of classes</prompt>
		    <format>
			    <language>perl</language>
			    <code>"—-ini_high $value"</code>
		    </format>
		    <ctrls>
			    <ctrl>
                    <message>Please enter an integer > 0 for the number of classes</message>
				    <language>perl</language>
				    <code>$classes &lt; 1</code>
			    </ctrl>
		    </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Float" issimple="1" ismandatory="1">
	    <name>angular_sampling</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Angular sampling interval (degrees)</prompt>
            <vdef>
                <value>7.5</value>
            </vdef>
		    <format>
			    <language>perl</language>
			    <code>"—-particle_diameter $value"</code>
		    </format>
		    <ctrls>
			    <ctrl>
                    <message>Please enter a float > 0.00 for the angular sampling interval (in degrees)</message>
				    <language>perl</language>
                    <code>$angular_sampling &lt; 0.01</code>
			    </ctrl>
		    </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Integer" issimple="1" ismandatory="1">
	    <name>search_range</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Pixel search range (pixels)</prompt>
		    <vdef>
			    <value>5</value>
		    </vdef>
		    <format>
			    <language>perl</language>
			    <code>"—-offset_range $value"</code>
		    </format>
		    <ctrls>
			    <ctrl>
                    <message>Please enter an integer > 0 for pixel search range (in pixels)</message>
				    <language>perl</language>
				    <code>$search_range &lt; 1</code>
			    </ctrl>
		    </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Integer" issimple="1" ismandatory="1">
	    <name>step_size</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Pixel search range step size (pixels)</prompt>
            <vdef>
                <value>1</value>
            </vdef>
		    <format>
			    <language>perl</language>
			    <code>"—-offset_step $value"</code>
		    </format>
		    <ctrls>
			    <ctrl>
                    <message>Please enter an integer > 0 for pixel search range step size (in pixels)</message>
				    <language>perl</language>
                    <code>$step_size &lt; 1</code>
			    </ctrl>
		    </ctrls>
	    </attributes>
    </parameter>

    <!-- set the run time -->		
    <parameter type="Float" issimple="1" ismandatory="1">
	    <name>runtime</name>
	    <attributes>
		    <group>1</group>
		    <paramfile>scheduler.conf</paramfile>
            <prompt>Maximum Relion runtime (hours)</prompt>
		    <vdef>
			    <value>12</value>
		    </vdef>
		    <comment>
			    <value>
				Estimate the maximum time your job will need to run (up to 48 hrs).  Your job will be killed if it doesn't finish within the time you specify, however jobs with shorter maximum run times are often scheduled sooner than longer jobs.
			    </value>
		    </comment>
		    <ctrls>
			    <ctrl>
				    <message>Please enter a float between 0.1 and 48.0, inclusively, for the  maximum run time (in hours)</message>
				    <language>perl</language>
				    <code>$runtime &lt; 0.1 || $runtime &gt; 48.0</code>
			    </ctrl>
		    </ctrls>
		    <format>
			    <language>perl</language>
			    <code>"runhours=$value\\n"</code>
		    </format>
	    </attributes>
    </parameter>

    <parameter type="String" issimple="1" ismandatory="1">
	    <name>basename</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Base name to use for the output file</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
		    <comment>
			    <value>This value determines the name of output files.</value>
		    </comment>
            <ctrls>
                <ctrl>
                    <message>Please enter a string for the base name of the output file</message>
                    <language>perl</language>
                    <code>!$basename</code>
                </ctrl>
            </ctrls>
	    </attributes>
    </parameter>

    <!-- Advanced parameters -->
    
    <parameter type="Excl" ismandatory="1">
	    <name>ctf_correction</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Do CTF correction?</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vlist>
                <value>yes</value>
                <label>Yes</label>
                <value>no</value>
                <label>No</label>
            </vlist>
            <vdef>
                <value>yes</value>
            </vdef>
	    </attributes>
    </parameter>

    <parameter type="Excl" ismandatory="1">
	    <name>ctf_corrected</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Has reference been CTF-corrected</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vlist>
                <value>yes</value>
                <label>Yes</label>
                <value>no</value>
                <label>No</label>
            </vlist>
            <vdef>
                <value>no</value>
            </vdef>
	    </attributes>
    </parameter>
    <parameter type="Excl" ismandatory="1">
	    <name>phase_flipped</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Have data been phase-flipped</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vlist>
                <value>yes</value>
                <label>Yes</label>
                <value>no</value>
                <label>No</label>
            </vlist>
            <vdef>
                <value>no</value>
            </vdef>
	    </attributes>
    </parameter>

    <parameter type="Excl" ismandatory="1">
	    <name>ignore_ctfs</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Ignore CTFs until first peak</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vlist>
                <value>yes</value>
                <label>Yes</label>
                <value>no</value>
                <label>No</label>
            </vlist>
            <vdef>
                <value>no</value>
            </vdef>
	    </attributes>
    </parameter>

    <parameter type="Integer" ismandatory="1">
	    <name>regularization</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Regularization parameter</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
		    <vdef>
			    <value>4</value>
		    </vdef>
		    <ctrls>
			    <ctrl>
                    <message>Please enter an integer between 1 and 4, inclusively, for the regularization parameter</message>
				    <language>perl</language>
				    <code>$regularization &lt; 1 || $regularization &gt; 4</code>
			    </ctrl>
		    </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Integer" ismandatory="1">
	    <name>e_step_limit</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Limit resolution E-step to (Angstroms)</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
		    <vdef>
			    <value>-1</value>
		    </vdef>
            <ctrls>
                <ctrl>
                    <message>Please enter a non-zero integer > -1 for E-step resolution limit (in Angstroms)</message>
                    <language>perl</language>
                    <code>$e_step_limit &lt; -1 || $e_step_limit == 0</code>
                </ctrl>
            </ctrls>
	    </attributes>
    </parameter>

    <parameter type="Excl" ismandatory="1">
	    <name>image_alignment</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Perform image alignment</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vlist>
                <value>yes</value>
                <label>Yes</label>
                <value>no</value>
                <label>No</label>
            </vlist>
            <vdef>
                <value>yes</value>
            </vdef>
	    </attributes>
    </parameter>

    <parameter type="Excl" ismandatory="1">
	    <name>angular_search</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Perform local angular searches</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vlist>
                <value>yes</value>
                <label>Yes</label>
                <value>no</value>
                <label>No</label>
            </vlist>
            <vdef>
                <value>no</value>
            </vdef>
	    </attributes>
    </parameter>

    <parameter type="Integer" ismandatory="1">
	    <name>angular_range</name>
	    <attributes>
		    <group>1</group>
		    <prompt>Local angular search range (degrees)</prompt>
		    <format>
			    <language>perl</language>
			    <code>"-o $value"</code>
		    </format>
            <vdef>
                <value>-1</value>
            </vdef>
            <ctrls>
                <ctrl>
                    <message>Please enter an integer > 0 for local angular search range (in degrees)</message>
                    <language>perl</language>
                    <code>$angular_range &lt; 1</code>
                </ctrl>
            </ctrls>
	    </attributes>
    </parameter>
